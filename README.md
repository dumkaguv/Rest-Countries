# –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
`Rest-Countries` ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —á–∏—Å—Ç–æ–º `HTML`, `CSS` –∏ `JavaScript`, –∫–æ—Ç–æ—Ä–æ–µ:

- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω –º–∏—Ä–∞.

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Å—Ç—Ä–∞–Ω –ø–æ —Ä–∞–∑–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –∏–º–µ–Ω–∏, —Ä–µ–≥–∏–æ–Ω—É, —Å—Ç–æ–ª–∏—Ü–µ).

- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–µ—Ç–∞–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã.

- –•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ `localStorage` –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≤–∏–∑–∏—Ç–∞—Ö.

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞:
### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
![–°–∫—Ä–∏–Ω—à–æ—Ç 1](./previews/home-white.png)

![–°–∫—Ä–∏–Ω—à–æ—Ç 2](./previews/home-black.png)

![–°–∫—Ä–∏–Ω—à–æ—Ç 3](./previews/home-phone.png)

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π —Å—Ç—Ä–∞–Ω—ã:

![–°–∫—Ä–∏–Ω—à–æ—Ç 4](./previews/details-white.png)

![–°–∫—Ä–∏–Ω—à–æ—Ç 5](./previews/details-black.png)

![–°–∫—Ä–∏–Ω—à–æ—Ç 6](./previews/details-phone.png)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- üîé –ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω –ø–æ –≤–≤–µ–¥—ë–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º.

- üó∫Ô∏è –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω—É –∏ –¥—Ä—É–≥–∏–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º.

- üìÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Å—Ç—Ä–∞–Ω —Å —Ñ–ª–∞–≥–æ–º, –Ω–∞—Å–µ–ª–µ–Ω–∏–µ–º, —Ä–µ–≥–∏–æ–Ω–æ–º –∏ —Å—Ç–æ–ª–∏—Ü–µ–π.

- üì• –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ localStorage –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

- üìÑ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç—Ä–∞–Ω—ã –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É.

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞: 
- –û—Ç–∫—Ä—ã—Ç—å –≤ –ª—é–±–æ–π IDE –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.
- –õ–∏–±–æ –æ—Ç–∫—Ä—ã—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ: https://dumkaguv.github.io/Rest-Countries/

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –∏–ª–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∫–æ–¥–∞:

#### 1. –ö–ª–∞—Å—Å `Countries` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:

- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç—Ä–∞–Ω–∞—Ö –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ `data.json`.

- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ `localStorage`.

- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Å—Ç—Ä–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞.

- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ `HTML-–∫–∞—Ä—Ç–æ—á–µ–∫` –¥–ª—è —Å—Ç—Ä–∞–Ω.

- –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–µ—Ç–∞–ª–µ–π.

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
```javascript
async init() {
  this.data = await this.getData();

  if (!this.isDataInitialized) {
    this.isDataInitialized = true;
  }

  this.saveData(this.data);
  this.renderCountries();
}
```
–ú–µ—Ç–æ–¥ `init` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω.

#### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç—Ä–∞–Ω–∞—Ö:
```javascript
async getData() {
  try {
    const response = await fetch("./data.json");

    if (response.status === 404) {
      console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö 404");
      return [];
    }

    const data = await response.json();

    return data;
  } catch (error) {
    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:", error);

    return [];
  }
}
```
#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å —Ñ–∞–π–ª–∞ `data.json`.

- –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 404 ‚Äî –≤ –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤.

- –í —Å–ª—É—á–∞–µ –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫ (`catch`) —Ç–∞–∫–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤.

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
```js
filterData = (searchParams = {}) => {
  const filteredData = this.data.filter((item) => {
    if (Object.values(searchParams).every((value) => !value)) {
      return true;
    }

    return Object.entries(searchParams).every(([key, value]) => {
      if (!value) return true;

      return item[key]
        ?.toString()
        .trim()
        .toLowerCase()
        .startsWith(value.trim().toLowerCase());
    });
  });

  return filteredData || [];
};
```

#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –ú–µ—Ç–æ–¥ `filterData` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ–∏—Å–∫–∞ (`searchParams`).

- –ï—Å–ª–∏ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ –ø—É—Å—Ç—ã–µ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤—Å–µ —Å—Ç—Ä–∞–Ω—ã.

- –ò–Ω–∞—á–µ, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è —Å—Ç—Ä–∞–Ω—ã —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É –∏ –ª–∏—à–Ω–∏–º –ø—Ä–æ–±–µ–ª–∞–º.

#### –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω:
```js
renderCountries = (searchParams = {}) => {
  const filteredData = this.filterData(searchParams);
  const countriesHTML = filteredData
    .map(({ name, population, region, capital, flags, alpha2Code }) =>
      this.countryTemplateHTML(
        name,
        numeral(population).format("0,0"),
        region,
        capital,
        flags.svg,
        `./details.html?id=${alpha2Code}`
      )
    )
    .join("");

  if (this.rootElement) {
    this.rootElement.innerHTML = countriesHTML;
  }
};
```
#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –°–Ω–∞—á–∞–ª–∞ –¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `filterData`.

- –ó–∞—Ç–µ–º –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã —Å–æ–∑–¥–∞—ë—Ç—Å—è `HTML-—Ä–∞–∑–º–µ—Ç–∫–∞` –∫–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç—Ä–∞–Ω—ã —Å –ø–æ–º–æ—â—å—é —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞.

- –ì–æ—Ç–æ–≤—ã–π `HTML` –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç.

**–í–∞–∂–Ω–æ**: –∑–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `numeral` –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–µ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞—Å–µ–ª–µ–Ω–∏—è).

#### 2. –ö–ª–∞—Å—Å `CustomSelect`

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
–ö–ª–∞—Å—Å `CustomSelect` —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–∞–¥–∞—é—â–∏–º —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º (`custom select`) –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω –ø–æ —Ä–µ–≥–∏–æ–Ω—É.
–ö–ª–∞—Å—Å `CustomSelectCollection` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ —Ç–∞–∫–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

#### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

- `rootElement` ‚Äî –∫–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä–∞.

- `titleTextContentElement` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—É–Ω–∫—Ç).

- `optionsElement` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø—Ü–∏–π.

- `optionElement` ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ –æ–ø—Ü–∏–π.

#### –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞, –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä:

- –ï—Å–ª–∏ –∫–ª–∏–∫ –Ω–∞ –æ–ø—Ü–∏—é ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

- –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ ‚Äî —Å–µ–ª–µ–∫—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è/–∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è.

- –û–ø—Ü–∏–∏ –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤ —Å—Ç—Ä–∞–Ω.

- –í—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ `countries.updateFilteredOption`, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω.

- –ö–ª–∏–∫ –≤–Ω–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –µ–≥–æ.

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

- –ê—Ç—Ä–∏–±—É—Ç—ã –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (`aria-expanded, aria-selected`) –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

- –û–ø—Ü–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `DOM` —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ (`renderOptions`).

- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤—ã–±–æ—Ä "`All`" (—Å–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–∞).

#### –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–Ω–¥–µ—Ä –æ–ø—Ü–∏–π:

```js
const rootSelector = "[data-js-custom-selector]";

class CustomSelect {
  stateClasses = {
    isExpanded: "is-expanded",
  };

  stateAttributes = {
    ariaExpanded: "aria-expanded",
    ariaSelected: "aria-selected",
  };

  selectors = {
    root: rootSelector,
    titleTextContent: "[data-js-custom-select-title]",
    options: "[data-js-custom-select-options]",
    option: "[data-js-custom-select-option]",
  };

  constructor(rootElement, countries) {
    this.rootElement = rootElement;
    this.countries = countries;
    this.titleTextContentElement = this.rootElement.querySelector(
      this.selectors.titleTextContent
    );
    this.optionsElement = this.rootElement.querySelector(
      this.selectors.options
    );
    this.optionElement = this.optionsElement.querySelectorAll(
      this.selectors.option
    );

    this.bindEvents();
  }
}
```

#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –ó–∞–¥–∞—é—Ç—Å—è `CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä—ã` –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Å–µ–ª–µ–∫—Ç–∞.

- –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ —Å–ø–∏—Å–∫–∞ –æ–ø—Ü–∏–π.

- –ù–∞–≤–µ—à–∏–≤–∞—é—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π.

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ —Å–µ–ª–µ–∫—Ç—É:
```js
onSelectorClick = (event) => {
  this.renderOptions();
  const target = event?.target;

  const isExpanded =
    this.rootElement.getAttribute(this.stateAttributes.ariaExpanded) ===
    "true";

  this.rootElement.setAttribute(
    this.stateAttributes.ariaExpanded,
    isExpanded ? "false" : "true"
  );

  this.rootElement.classList.toggle(
    this.stateClasses.isExpanded,
    !isExpanded
  );

  if (target.matches(this.selectors.option)) {
    this.onOptionSelect(target);
  }
};
```

#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –ü—Ä–∏ –∫–ª–∏–∫–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –æ–ø—Ü–∏–∏ (–µ—Å–ª–∏ –æ–Ω–∏ –µ—â—ë –Ω–µ –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω—ã).

- –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–ø–∏—Å–∫–∞.

- –ï—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –Ω–∞ –æ–ø—Ü–∏—é ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞.

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –æ–ø—Ü–∏–∏:
```js
onOptionSelect = (optionElement) => {
  const filteredOption = optionElement.textContent.trim();

  this.titleTextContentElement.textContent = filteredOption;
  this.countries.updateFilteredOption(
    filteredOption === "All" ? "" : filteredOption
  );

  const items = this.optionsElement.querySelectorAll(
    this.selectors.option
  );

  const updateAriaStates = () => {
    items.forEach((item) => {
      item.setAttribute(
        this.stateAttributes.ariaSelected,
        optionElement === item
      );
    });
  };

  updateAriaStates();
};
```

#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–ª–µ–∫—Ç–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–µ–≥–∏–æ–Ω.

- –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä –≤ –æ–±—ä–µ–∫—Ç —Å—Ç—Ä–∞–Ω.

- –î–ª—è –≤—Å–µ—Ö –æ–ø—Ü–∏–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞—Ç—Ä–∏–±—É—Ç `aria-selected`.

#### –†–µ–Ω–¥–µ—Ä –æ–ø—Ü–∏–π:
```js
renderOptions = () => {
  if (this.optionsElement?.children.length) {
    return;
  }

  this.getOptions();
  this.optionsElement.innerHTML = "";
  this.optionsElement.insertAdjacentHTML(
    "beforeend",
    this.optionTemplateHTML("All")
  );

  this.availableOptions.forEach((region) => {
    this.optionsElement.insertAdjacentHTML(
      "beforeend",
      this.optionTemplateHTML(region)
    );
  });
};

getOptions = () => {
  this.availableOptions = new Set(
    this.countries.data.map((country) => country.region)
  );
};

optionTemplateHTML(region) {
  return `
    <li
      class="custom-select__option"
      role="option"
      aria-selected="false"
      data-js-custom-select-option
    >
      ${region}
    </li>
  `;
}
```
#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –û–ø—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç—Ä–∞–Ω–∞—Ö.

- –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—É–Ω–∫—Ç "All", –ø–æ—Ç–æ–º –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã.

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Set`, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –¥—É–±–ª–∏.

### 3. –ö–ª–∞—Å—Å `Details`

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
- –ö–ª–∞—Å—Å `Details` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

#### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

- `rootElement` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–µ—Ç–∞–ª–µ–π.

- `borders` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–ø–∏—Å–∫–∞ —Å–æ—Å–µ–¥–Ω–∏—Ö —Å—Ç—Ä–∞–Ω.

#### –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞, –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:

- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω –∏–∑ `localStorage`.

- –ò–∑–≤–ª–µ–∫–∞–µ—Ç `ID` —Å—Ç—Ä–∞–Ω—ã –∏–∑ URL-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (`?id=XX`).

- –ù–∞—Ö–æ–¥–∏—Ç —Å—Ç—Ä–∞–Ω—É –ø–æ `ID`.

- –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç—Ä–∞–Ω–µ:

  -  –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: –Ω–∞–∑–≤–∞–Ω–∏–µ, –Ω–∞—Å–µ–ª–µ–Ω–∏–µ, —Ä–µ–≥–∏–æ–Ω, –ø–æ–¥—Ä–µ–≥–∏–æ–Ω, —Å—Ç–æ–ª–∏—Ü–∞ –∏ —Ç.–¥.

  -  –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–∫–∏ –≤–∞–ª—é—Ç, —è–∑—ã–∫–æ–≤ –∏ –¥–æ–º–µ–Ω–æ–≤.

  -  –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã (–≥—Ä–∞–Ω–∏—Ü—ã).

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

- –î–ª—è —á–∏—Å–µ–ª –Ω–∞—Å–µ–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `numeral` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏.

- –ö–Ω–æ–ø–∫–∞ "`Back`" –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (`window.history.back()`).

- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≥—Ä–∞–Ω–∏—Ü —Å–ø–∏—Å–æ–∫ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.

#### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:
```js
class Details {
  selectors = {
    root: "[data-js-page-details]",
    borders: "[data-js-page-details-borders-list]",
    border: "[data-js-page-details-border]",
  };

  constructor() {
    this.rootElement = document.querySelector(this.selectors.root);
    this.data = this.loadCountries();
    this.init();
  }
```
#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –ö–ª–∞—Å—Å `Details` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º `CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤` –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

- –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã–±–æ—Ä –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç—Ä–∞–Ω–∞—Ö —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `loadCountries`.

#### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç—Ä–∞–Ω–∞—Ö:
```js
loadCountries = () => {
  const savedData = localStorage.getItem("countriesData");
  if (savedData) {
    return JSON.parse(savedData);
  }
  return [];
};
```

#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –ú–µ—Ç–æ–¥ `loadCountries` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—Ä–∞–Ω–∞—Ö –∏–∑ `localStorage`.

- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—Ä–∞–Ω–∞—Ö –µ—Å—Ç—å, –æ–Ω–∏ –ø–∞—Ä—Å—è—Ç—Å—è –∏–∑ `JSON`.

- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤.

#### –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—Ä–∞–Ω–µ:
```js
renderDetails = () => {
  const url = new URL(window.location.href);
  const params = new URLSearchParams(url.search);
  const urlId = params.get("id");

  if (!urlId) {
    return;
  }

  const itemID = [...this.data].findIndex(
    (item) => item.alpha2Code === urlId
  );

  const {
    flags,
    name,
    nativeName,
    population,
    region,
    subregion,
    capital,
    topLevelDomain,
    currencies,
    languages,
    borders,
  } = this.data[itemID];

  const pathToImage = flags.svg;
  const currenciesFormatted = currencies.map((currency) => {
    return currency.code + " " + currency.symbol;
  });

  const languagesFormatted = languages.map((language) => {
    return language.name;
  });

  const borderCountriesFormatted = borders?.map((border) => {
    const foundItem = this.data.find(
      (item) => item.alpha3Code === border
    );
    return foundItem
      ? { name: foundItem.name, alpha2Code: foundItem.alpha2Code }
      : "";
  });

  this.rootElement.insertAdjacentHTML(
    "afterbegin",
    this.pageDetailsTemplateHTML(
      pathToImage,
      name,
      nativeName,
      numeral(population).format("0,0"),
      region,
      subregion,
      capital,
      topLevelDomain.toString().replaceAll(",", ", "),
      currenciesFormatted.toString().replaceAll(",", ", "),
      languagesFormatted.toString().replaceAll(",", ", "),
      borderCountriesFormatted
    )
  );
};
```

#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –í –º–µ—Ç–æ–¥–µ `renderDetails` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `id` –∏–∑ `URL` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `details.html?id=RU`).

- –í–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ –∏—â–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∞ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º `alpha2Code`.

- –î–∞–ª–µ–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ñ–ª–∞–≥, –Ω–∞—Å–µ–ª–µ–Ω–∏–µ, –≤–∞–ª—é—Ç—ã, —è–∑—ã–∫–∏ –∏ —Å–æ—Å–µ–¥–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã).

- –°—Ç—Ä–æ–∫–∞ `HTML` –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ –æ —Å—Ç—Ä–∞–Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `pageDetailsTemplateHTML`.

### 4. –ö–ª–∞—Å—Å `Search`

#### –û–ø–∏—Å–∞–Ω–∏–µ:
- –§–∞–π–ª `Search.js` —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –¥–ª—è —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ –∫–ª–∞—Å—Å–∞:

  - `Search`: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤–≤–æ–¥–∞ –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å.

  - `SearchCollection`: –£–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Ö.

#### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:
```js
const rootSelector = "[data-js-search-input]";

class Search {
  constructor(rootElement, countries) {
    this.rootElement = rootElement;
    this.countries = countries;
    this.searchQuery = "";
    this.bindEvents();
  }

  onInputChange = () => {
    const searchQuery = this.rootElement.value.trim().toLowerCase();
    this.countries.updateSearchQuery(searchQuery);
  };

  bindEvents() {
    this.rootElement.addEventListener("input", this.onInputChange);
  }
}

class SearchCollection {
  constructor(countries) {
    this.countries = countries;
    this.init();
  }

  init() {
    document
      .querySelectorAll(rootSelector)
      .forEach((element) => new Search(element, this.countries));
  }
}

export default SearchCollection;
```

#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
#### `Search`:

- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–≤–æ–¥–∞ –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤ –æ–±—ä–µ–∫—Ç `countries` —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `updateSearchQuery`.

- –°–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è `input` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

#### `SearchCollection`:

- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–∏—Å–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–ª—è –Ω–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–∞ `Search`.

### 5. –ö–ª–∞—Å—Å `SearchFilterManager`

#### –û–ø–∏—Å–∞–Ω–∏–µ:
–§–∞–π–ª `SearchFilterManager.js` —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø–æ–∏—Å–∫–æ–≤–æ–º—É –∑–∞–ø—Ä–æ—Å—É –∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —Ä–µ–≥–∏–æ–Ω—É). –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å `SearchManagerFilter`, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω.

#### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:
```js
class SearchManagerFilter {
  constructor(countries) {
    this.countries = countries;
    this.searchQuery = "";
    this.filteredOption = "";
  }

  get data() {
    return this.countries.data;
  }

  updateSearchQuery(searchQuery) {
    this.searchQuery = searchQuery;
    this.renderCountries();
  }

  updateFilteredOption(filteredOption) {
    this.filteredOption = filteredOption;
    this.renderCountries();
  }

  renderCountries() {
    this.countries.renderCountries({
      name: this.searchQuery,
      region: this.filteredOption,
    });
  }
}

export default SearchManagerFilter;
```

#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
#### `SearchManagerFilter`:

- –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (`searchQuery`) –∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–ø—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (`filteredOption`).

- –û–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `renderCountries`, –ø–µ—Ä–µ–¥–∞–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Countries`.

### 6. –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `main.js`

#### –û–ø–∏—Å–∞–Ω–∏–µ:
- –§–∞–π–ª `main.js` —è–≤–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –û–Ω –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–¥—É–ª–∏:

- `Theme` ‚Äî –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–º–æ–π (—Ç–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è).

- `Countries` ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω.

- `SearchCollection` ‚Äî –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –ø–æ–ª–µ–π.

- `CustomSelectCollection` ‚Äî –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ–≤.

- `SearchManagerFilter` ‚Äî –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ–∏—Å–∫–∞.

- `Details` - –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –æ —Å—Ç—Ä–∞–Ω–µ.

#### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:
```js
import Countries from "./Countries.js";
import SearchCollection from "./Search.js";
import Theme from "./Theme.js";
import CustomSelectCollection from "./CustomSelect.js";
import SearchManagerFilter from "./SearchFilterManager.js";
import Details from "./Details.js";

document.addEventListener("DOMContentLoaded", () => {
  new Theme();

  const countries = new Countries();
  const manager = new SearchManagerFilter(countries);
  new SearchCollection(manager);
  new CustomSelectCollection(manager);

  new Details();
});
```

#### –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`DOMContentLoaded`):

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –º–æ–¥—É–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–º–æ–π, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω, –ø–æ–∏—Å–∫–æ–º, –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å–µ–ª–µ–∫—Ç–∞–º–∏ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ —Å—Ç—Ä–∞–Ω.

- –û–±—ä–µ–∫—Ç `manager` —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–∏—Å–∫–æ–≤—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –ø–µ—Ä–µ–¥–∞–≤–∞—è –∏—Ö –≤ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

### 7. –ö–ª–∞—Å—Å `Theme`

#### –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–∞:
- –≠—Ç–æ—Ç —Ñ–∞–π–ª —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —Å–≤–µ—Ç–ª–æ–π –∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º–æ–π –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ö–ª–∞—Å—Å `Theme` —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ç–µ–º—ã, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º —Å –∫–Ω–æ–ø–∫–æ–π –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è, –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –≤ `localStorage`. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É –∂–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –≤–∫–ª—é—á–∞—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ –∏–∫–æ–Ω–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–µ.

#### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:
```js
class Theme {
  selectors = {
    root: "[data-js-theme]",
    icon: "[data-js-theme-icon]",
    text: "[data-js-theme-text]",
  };

  stateAttributes = {
    light: "light",
    dark: "dark",
  };

  themeButtonTextContent = {
    darkMode: "Dark Mode",
    lightMode: "Light Mode",
  };

  stateClasses = {
    themeLoaded: "theme-loaded",
  };

  dataAttribute = "data-theme";

  localStorageValue = "theme";

  constructor() {
    this.restorePreference();
    document.documentElement.classList.add(this.stateClasses.themeLoaded);

    this.rootElement = document.querySelector(this.selectors.root);
    this.iconElement = document.querySelector(this.selectors.icon);
    this.textElement = document.querySelector(this.selectors.text);
    this.currentTheme = document.documentElement.getAttribute(this.dataAttribute);

    this.changeThemeButtonContent();
    this.bindEvents();
  }

  changeTheme = () => {
    const newTheme =
      this.currentTheme === this.stateAttributes.dark
        ? this.stateAttributes.light
        : this.stateAttributes.dark;
    document.documentElement.setAttribute(this.dataAttribute, newTheme);
    this.currentTheme = newTheme;

    this.savePreference(newTheme);
    this.changeThemeButtonContent();
  };

  changeThemeButtonContent = () => {
    const changeTextContent = () => {
      const textContent =
        this.currentTheme === this.stateAttributes.light
          ? this.themeButtonTextContent.darkMode
          : this.themeButtonTextContent.lightMode;
      this.textElement.textContent = textContent;
    };

    const changeIcon = () => {
      const currentIconHTML =
        this.currentTheme === this.stateAttributes.light
          ? this.getThemeIconSVG(this.stateAttributes.light)
          : this.getThemeIconSVG(this.stateAttributes.dark);
          
      const icon = this.rootElement.querySelector(this.selectors.icon);
      icon?.remove();
      this.rootElement.insertAdjacentHTML("afterbegin", currentIconHTML);
    };

    changeTextContent();
    changeIcon();
  };

  onButtonClick = () => {
    this.changeTheme();
  };

  savePreference = (theme) => {
    localStorage.setItem(this.localStorageValue, theme);
  };

  restorePreference = () => {
    const savedTheme = localStorage.getItem(this.localStorageValue);
    if (savedTheme) {
      document.documentElement.setAttribute(
        this.dataAttribute,
        savedTheme
      );
    } else {
      document.documentElement.setAttribute(
        this.dataAttribute,
        this.stateAttributes.light
      );
    }
  };

  bindEvents() {
    this.rootElement.addEventListener("click", this.onButtonClick);
  }

  getThemeIconSVG = () => {
    if (this.currentTheme === this.stateAttributes.light) {
      return `
        <svg fill="#000000" class="theme__icon" height="32px" width="32px" version="1.1" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve" data-js-theme-icon>
          <path d="M63.4374046,38.4606323c-0.4258003-0.2060013-0.9384995-0.0848999-1.2276001,0.2910995 c-1.2803001,1.6650009-2.9452972,3.2001991-4.9501991,4.5625c-11.6180992,7.8808022-27.544899,4.9248009-35.4971008-6.5956993 c-7.8154011-11.3204002-4.9902-26.9736996,6.2968998-34.8936005c0.3799-0.2666,0.5263996-0.7588,0.3544998-1.1895001 c-0.1728001-0.4316-0.625-0.6835-1.0771008-0.6181c-4.6474991,0.6953-9.2070999,2.4902-13.1875,5.1893997 C6.9706059,10.0759325,2.1415057,17.427433,0.5526057,25.9079323c-1.582,8.4414024,0.2402,16.9932022,5.1308002,24.0791016 c6.2872,9.1054993,16.4864006,14.0058975,26.8554993,14.0058975c6.3173981,0,12.6982994-1.819397,18.2939987-5.6161995 c6.5800018-4.461998,11.2461014-11.1298981,13.1406021-18.7753983 C64.0877075,39.142334,63.8631058,38.6657333,63.4374046,38.4606323z M49.7098045,56.7224312 c-13.8710976,9.410099-32.8847961,5.8828011-42.3798981-7.872097c-4.5858998-6.642601-6.2948999-14.660202-4.8114996-22.5742016 C4.0086055,18.3239326,8.5379057,11.4294329,15.2723055,6.861033c2.5801001-1.75,5.4189997-3.0937002,8.3643007-3.9726 c-9.3916006,9.0702991-11.1416006,23.9258003-3.5205002,34.9668007 c8.5741997,12.4188995,25.7422009,15.6094017,38.2666016,7.1133003c0.8260994-0.5606003,1.5996017-1.149498,2.3182983-1.764698 C58.4803047,48.6472321,54.6766052,53.3542328,49.7098045,56.7224312z"/>
        </svg>
      `;
    } else {
      return `
        <svg class="theme__icon" width="32px" height="32px" viewBox="0 0 24 24" fill="none" data-js-theme-icon>
          <path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      `;
    }
  };
}

export default Theme;
```
#### –û–ø–∏—Å–∞–Ω–∏–µ:
- `Theme` ‚Äî –∫–ª–∞—Å—Å, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–µ–º –Ω–∞ —Å–∞–π—Ç–µ (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è). –û–Ω –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ –∫–Ω–æ–ø–∫–∞ –∏ –∏–∫–æ–Ω–∫–∏.

- –¢–µ–º—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `localStorage`, —á—Ç–æ–±—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏ —Å–∞–π—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª —Ç—É –∂–µ —Ç–µ–º—É.

- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã –º–µ–Ω—è–µ—Ç –∫–∞–∫ —Ç–µ–∫—Å—Ç ("Dark Mode" / "Light Mode"), —Ç–∞–∫ –∏ –∏–∫–æ–Ω–∫—É.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:
##### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º:

- –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–º–µ–Ω–∞ —Ç–µ–º—ã –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é.

##### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π:

- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã, –Ω–æ–≤—ã–π –≤—ã–±–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage, —á—Ç–æ–±—ã –æ–Ω –ø—Ä–∏–º–µ–Ω—è–ª—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

##### –ò–∫–æ–Ω–∫–∏ –∏ —Ç–µ–∫—Å—Ç:

- –î–ª—è –∫–∞–∂–¥–æ–π —Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–≤–æ—è –∏–∫–æ–Ω–∫–∞ –∏ —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏.

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:
#### `Numeral.js`

- –ß—Ç–æ —ç—Ç–æ: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–µ–ª. –í –≤–∞—à–µ–º –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–µ–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞—Å–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Ç—ã—Å—è—á–∏.

- –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ:
```js
numeral(population).format("0,0")
```

- –ò—Å—Ç–æ—á–Ω–∏–∫: Numeral.js

#### MDN Web Docs

- –ß—Ç–æ —ç—Ç–æ: –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –≤–∫–ª—é—á–∞—è `JavaScript`, `HTML`, `CSS` –∏ –¥—Ä—É–≥–∏–µ. –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–∞–º–∏ –º–µ—Ç–æ–¥—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ `querySelector`, `addEventListener`, —Ä–∞–±–æ—Ç–∞ —Å `localStorage` –∏ —Ç.–¥., –æ–ø–∏—Å–∞–Ω—ã –≤ MDN.

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ: –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–±–æ—Ç–∞ —Å `localStorage`:

```javascript
localStorage.setItem('countriesData', JSON.stringify(data));
```

–ò—Å—Ç–æ—á–Ω–∏–∫: MDN Web Docs
